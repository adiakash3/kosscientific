{% extends 'main/base.html'%}

{% block title%}Become member{% endblock %}

{% block style%}
<style>
    .myModal {
        width: 8000px;
        margin-left: -4000px;
    }

    .orange {
        background: #ff6f00 !important;
        color: #fff;
    }

    .button {
        color: #ff0066 !important;
        background-color: #ffffff;
    }

    .margin10 {
        margin-bottom: 10px;
    }

    .nomargintop {
        margin-top: 0px
    }

    .orange p {
        color: #fff;
        font-style: normal;
        margin: 3px;
        text-decoration: none;
    }

    .tile {
        width: 100%;
        padding: 15px;
        height: 220px;
        background: #efefef;
        margin-bottom: 20px;
    }

    .secondheding {
        font-size: 25px;

        color: #4a148c;
    }

    /* second colum css */
    .aquablue {
        background: #00b8d4 !important;
        color: #fff;
    }

    .button1 {
        color: #ff0066;
        background-color: #ffffff;
        -ms-transition: background-color 0.2s ease-in-out 0s, opacity 0.2s ease-in-out 0s;
        transition: background-color 0.2s ease-in-out 0s, opacity 0.2s ease-in-out 0s;
        font-weight: 600;
        font-family: "Open Sans", "Helvetica Neue", Arial, Helvetica, Verdana, sans-serif;
        text-align: center;
        vertical-align: middle;
        text-transform: capitalize;
        -webkit-user-select: none;
        -ms-user-select: none;
        -moz-user-select: none;
        user-select: none;
        white-space: nowrap;
        overflow: hidden;
        padding: 0 18px;
        margin-right: 18px;
        border: 0 none;
        border-radius: 3px;
        display: inline-block;
        font-size: 13px;
        height: 32px;
        line-height: 32px;

    }

    .buttoninfo {
        color: #ff0066;
        background-color: #ffffff;
        -ms-transition: background-color 0.2s ease-in-out 0s, opacity 0.2s ease-in-out 0s;
        transition: background-color 0.2s ease-in-out 0s, opacity 0.2s ease-in-out 0s;
        font-weight: 600;
        font-family: "Open Sans", "Helvetica Neue", Arial, Helvetica, Verdana, sans-serif;
        text-align: center;
        vertical-align: middle;
        text-transform: capitalize;
        -webkit-user-select: none;
        -ms-user-select: none;
        -moz-user-select: none;
        user-select: none;
        white-space: nowrap;
        overflow: hidden;
        padding: 0 18px;
        /* margin-right: 18px; */
        border: 0 none;
        border-radius: 3px;
        display: inline-block;
        font-size: 13px;
        height: 32px;
        line-height: 32px;

    }

    .darkblue {
        background: #311b92 !important;
        color: #fff;
    }

    .green {
        background: #339933 !important;
        color: #fff;
    }

    a:hover {
        color: #ff0066;
        text-decoration: none;
    }
</style>
{% endblock style%}

{% block script%}

{% endblock %}


<html>



<head>
    <!--write main content here-->
    {% block content %}
    {% load static %}

    <script src="{% static 'koss/js/jquery-3.1.1.min.js' %}"></script>
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>

    <script>
        $(document).on("change", "#memberID1", function () {

            console.log("hello");
            var id = $(this).val();
            console.log($(this).val());
            $.ajax({
                method: 'get',
                url: "{%url 'koscientific:new_func_for_ajaxget'%}",

                dataType: 'json',
                data: {
                    "id": $(this).val()
                },
                success: function (data) {
                    $('#select5').val(data.kos_no);
                },
                error: function (data) {
                    alert(data.error);

                }

            });

        });
    </script>
    <script>
        $(document).on("change", "#memberID2", function () {

            console.log("hello");
            var id = $(this).val();
            console.log($(this).val());
            $.ajax({
                method: 'get',
                url: "{%url 'koscientific:new_func_for_ajaxget'%}",

                dataType: 'json',
                data: {
                    "id": $(this).val()
                },
                success: function (data) {
                    $('#select6').val(data.kos_no);
                },
                error: function (data) {
                    alert(data.error);

                }

            });

        });
    </script>
    {% if perms.koscientific.complete_payment %}
    <div id="myModal" class="modal fade " data-backdrop="static" data-keyboard="false">
        <div class="modal-dialog">
            <div class="modal-content" style="width: 804px;margin: -60px -150px;">
                <div class="modal-header">
                    <center>
                        <div class="wrapper wrapper-content  animated fadeInRight container">

                            <div class="ibox-content" style="background-color: #f3f7ff;">

                                <form id="registrationForm" method="POST" data-state-url="ajax/load-state/"
                                    data-city-url="ajax/load-city/" enctype="multipart/form-data">
                                    {% csrf_token %}
                                    <!-- {{ form.as_p}} -->
                                    {% if messages %}
                                    {% for message in messages %}
                                    <div class="alert alert-{{ message.tags }}" role="alert">
                                        {{ message }}
                                    </div>

                                    {% endfor %}
                                    {% endif %}


                                    <div style="text-align:center">
                                        <h3><strong>KOS Membership Application Form</strong></h3>
                                    </div>

                                    <!--            <div class="hr-line-dashed "></div>-->
                                    <hr style="0.5px dashed black">

                                    <!-- Start Row Name and Date of Birth.-->

                                    <div class="form-group  row">
                                        <div class="col-sm-6">

                                            <input type="text" placeholder="First Name" class="form-control"
                                                name="first_name" formControlName="Name"
                                                value="{{request.user.first_name}}" required>
                                        </div>
                                        <div class="col-sm-6">

                                            <input type="text" placeholder="Last Name" class="form-control"
                                                name="last_name" formControlName="last_name"
                                                value="{{request.user.first_name}}" required>
                                        </div>

                                    </div>

                                    <div class="form-group  row">

                                        <label class="col-sm-2 col-form-label">Date Of Birth:<span
                                                style="color: red;">*</span></label>
                                        <div class="col-sm-3">
                                            <input type="text" placeholder="Enter Date of Birth" class="form-control"
                                                name="dob" id="dob" required formControlName="dob">
                                        </div>
                                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                                        <label class="col-sm-2 col-form-label">Gender:<span
                                                style="color: red;">*</span></label>

                                        <div class="col-sm-1">
                                            <input type="radio" name="gender" id="male" value="Male" required
                                                formControlName="gender">&nbsp;Male
                                        </div>
                                        <div class="col-sm-1">
                                            <input type="radio" name="gender" id="female" value="female" required
                                                formControlName="gender">&nbspFemale
                                        </div>
                                    </div>

                                    <div class="form-group row">

                                        <!--                <label class="col-sm-2 col-form-label"> Address:<span style="color: red;">*</span></label>-->
                                        <label class="col-sm-2 col-form-label" style="margin-left:-18px"><b>
                                                <strong><u>Address</u></strong></b><span
                                                style="color: red;">*</span></label>
                                        <div class="col-sm-10" style="margin-left:18px">
                                            <input type="text" placeholder="Enter Street Address" class="form-control"
                                                id="streetAddress" required name="recidence_Street_address"
                                                formControlName="streetAddress">
                                        </div>
                                    </div>
                                    <div class="form-group row">

                                        <!--                <label class="col-sm-2 col-form-label">Street Address Line 2:<span style="color: red;">*</span></label>-->
                                        <label class="col-sm-2 col-form-label"> <u></u><span
                                                style="color: red;"></span></label>
                                        <div class="col-sm-10">
                                            <input type="text" placeholder="Enter Street Address Line 2"
                                                class="form-control" id="streetaddress2" name="recidence_address_line_2"
                                                formControlName="addressLine2">
                                        </div>
                                    </div>

                                    <div class="form-group row">

                                        <label class="col-sm-2 col-form-label"><span
                                                style="color: red;padding-left:110%;">*</span></label>
                                        <div class="col-sm-4">
                                            <select id="id_country" name="recidencecountry" class="form-control">
                                                <option value='105'>India</option>
                                                {% for each in country %}
                                                <option value="{{each.pk}}">{{each.name}}</option>
                                                {% endfor %}
                                            </select>
                                        </div>



                                        <label class="col-sm-2 col-form-label"><span
                                                style="color: red;padding-left:110%;">*</span></label>
                                        <div class="col-sm-4">
                                            <select id="recidence_cstate" name="recidencesstate" class="form-control">
                                                <option value='1341'>Karnataka</option>
                                                {% for each in region %}
                                                <option value="{{ each.pk }}">{{ each.name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>

                                    </div>

                                    <div class="form-group row">


                                        <label for="id_city" class="col-sm-2 col-form-label"><span
                                                style="color: red;padding-left:110%;">*</span></label>
                                        <div class="col-sm-4">
                                            <select id="id_city" name="recidencecity" class="form-control">
                                                <option value="">-- Select City --</option>
                                                {% for each in city %}
                                                <option value="{{ each.pk }}">{{ each.name }}</option>
                                                {% endfor %}
                                            </select>
                                        </div>

                                        <label class="col-sm-2 col-form-label"><span
                                                style="color: red;padding-left:110%;">*</span></label>
                                        <div class="col-sm-4">
                                            <input type="text" placeholder="Enter ZIP / Postal Code"
                                                class="form-control" id="postalCode" name="recidence_pincode"
                                                formControlName="postalCode">
                                        </div>
                                    </div>

                                    <div style="text-align:left">
                                        <h4><strong><u>Office Address</u></strong></h4>
                                        <input type="checkbox" name="address_condition " id="filladdress" value="True"
                                            {% if member.address_condition.value %} checked {% endif %} />Same as
                                        previous
                                    </div>

                                    <div class="officeAddress">
                                        <div class="form-group row">

                                            <label class="col-sm-2 col-form-label">Office Address:<span
                                                    style="color: red;">*</span></label>
                                            <div class="col-sm-10">
                                                <input type="text" placeholder="Enter Street Address"
                                                    class="form-control" id="officeaddress1" required
                                                    name="office_Street_address" formControlName="streetAddress">
                                            </div>
                                        </div>
                                        <div class="form-group row">

                                            <label class="col-sm-2 col-form-label">Office Address Line 2:</label>
                                            <div class="col-sm-10">
                                                <input type="text" placeholder="Enter Address Line 2"
                                                    class="form-control" id="officeaddress2"
                                                    name="office_address_line_2" formControlName="addressLine2">
                                            </div>
                                        </div>

                                        <div class="form-group row">

                                            <label class="col-sm-2 col-form-label"><span
                                                    style="color: red;padding-left:110%;">*</span></label>
                                            <div class="col-sm-4">
                                                <select id="id_country_office" name="office_country"
                                                    class="form-control">
                                                    <option value='105'>India</option>
                                                    {% for each in country %}
                                                    <option value="{{each.pk}}">{{each.name}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>

                                            <label class="col-sm-2 col-form-label"><span
                                                    style="color: red;padding-left:110%;">*</span></label>
                                            <div class="col-sm-4">
                                                <select id="recidence_cstate_office" name="office_state"
                                                    class="form-control">
                                                    <option value='1341'>Karnataka</option>
                                                    {% for each in region %}
                                                    <option value="{{ each.pk }}">{{ each.name }}</option>
                                                    {% endfor %}
                                                </select>

                                            </div>

                                        </div>

                                        <div class="form-group row">

                                            <label class="col-sm-2 col-form-label"><span
                                                    style="color: red;padding-left:110%;">*</span></label>
                                            <div class="col-sm-4">
                                                <select id="id_city_office" name="office_city" class="form-control">
                                                    <option value=''>--Select City --</option>
                                                    {% for each in city %}
                                                    <option value="{{ each.pk }}">{{ each.name }}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>




                                            <label class="col-sm-2 col-form-label"><span
                                                    style="color: red;padding-left:110%;">*</span></label>
                                            <div class="col-sm-4">
                                                <input type="text" placeholder="Enter ZIP / Postal Code"
                                                    class="form-control" id="postalCode" name="office_pincode"
                                                    formControlName="postalCode">
                                            </div>

                                        </div>
                                    </div>


                                    <div style="text-align:left">
                                        <h4><strong><u>Contacts</u></strong></h4>
                                    </div>

                                    <div class="form-group row">


                                        <label class="col-sm-1 col-form-label"><span
                                                style="color: red;padding-left:110%;">*</span></label>
                                        <div class="col-sm-5">
                                            <input type="text" placeholder="Enter Mobile" class="form-control"
                                                id="mobile" name="mobile" required formControlName="mobile">
                                        </div>


                                        <label class="col-sm-1 col-form-label"><span
                                                style="color: red;"></span>&nbsp</label>
                                        <div class="col-sm-5">
                                            <input type="text" placeholder="Enter Home Phone NO" class="form-control"
                                                id="homePhoneNo"  name="home_phone"
                                                formControlName="homePhoneNo">
                                        </div>

                                    </div>

                                    <div class="form-group row">


                                        <label class="col-sm-1 col-form-label"><span
                                                style="color: red;"></span>&nbsp</label>
                                        <div class="col-sm-5">
                                            <input type="text" placeholder="Enter Office Phone NO" class="form-control"
                                                id="officePhoneNO" name="office_phone" formControlName="officePhoneNO">
                                        </div>

                                        <label class="col-sm-1 col-form-label"><span
                                                style="color: red;padding-left:110%;">*</span></label>
                                        <div class="col-sm-5">
                                            <input type="email" placeholder="Enter Email" class="form-control"
                                                id="email" name="email" required value="{{request.user.email}}"
                                                formControlName="email">
                                        </div>

                                    </div>


                                    <!--            <div class="hr-line-dashed" ></div>-->
                                    <hr style="0.5px dashed black">
                                    <div style="text-align:left">
                                        <h4><strong><u>Qualification</u></strong></h4>
                                    </div>

                                    

                                    <table class="table form-table table-bordered table-sm">
                                        <thead class="text-center" style="background-color:red;">
                                            <col width="130">
                                            <col width="180">
                                            <col width="130">
                                            <col width="180">
                                            <tr>
                                                <th style="font-weight: normal;">Degree</th>
                                                <th style="font-weight: normal;">Year</th>
                                                <th style="font-weight: normal;">College</th>
                                                <th></th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            {% for form_data in formset %}
                                            <tr class="item">
                                                <td><span style="color: red;">*</span>
                                                    {{ form_data.degree }}
                                                </td>
                                                <td style="width:50px"><span style="color: red;">*</span>
                                                    {{ form_data.year }}
                                                </td>
                                                <td><span style="color: red;">*</span>
                                                    {{ form_data.college }}
                                                </td>
                                                <td>
                                                    <button type="button" class="btn btn-danger btn-sm remove-form-row"
                                                        id="{{ formset.prefix }}">

                                                        Delete
                                                    </button>
                                                    <button type="button" class="btn btn-sm btn-success add-form-row"
                                                        id="{{ formset.prefix }}">
                                                        Add
                                                    </button>
                                                </td>
                                            </tr>
                                            {% endfor %}
                                            <tr>
                                                <!--                    <td colspan="9"-->
                                                <!--                        style="border-left: none!important; border-right: none !important; border-bottom: none!important;">-->
                                                <!--                        <button type="button" class="btn btn-sm btn-success add-form-row"-->
                                                <!--                                id="{{ formset.prefix }}">-->
                                                <!--                            Add-->
                                                <!--                        </button>-->
                                                <!--                    </td>-->
                                            </tr>
                                        </tbody>
                                    </table>
                                    {{ formset.management_form }}


                                    <!--            ===============================================================-->


                                    <div class="form-group row">

                                        <div class="col-sm-6">

                                            <input type="text" placeholder="Enter Medical Council Registration No"
                                                class="form-control" required id="medicalCouncilRegistration"
                                                name="medical_registration_no"
                                                formControlName="medicalCouncilRegistration">
                                        </div>


                                        <div class="col-sm-5">Upload
                                            <!--                    <label class="col-form-label">Photocopy of Medical Council Registration Certificate:<span style="color: red;">*</span></label>-->
                                            <input type="file" class="file" id="addressLine2" required
                                                name="certificate"
                                                placeholder="Photocopy of Medical Council Registration Certificate">

                                        </div>
                                        <div class="col-sm-12">
                                            <div class="form-group row">
                                                <div class="col-sm-6">
                                                    <!--                                <label for="country">Country</label>-->
                                                    <select id="reg_country" name="reg_country" class="form-control">
                                                        <option value='105'>India</option>
                                                        {% for each in country %}
                                                        <option value="{{each.pk}}">{{each.name}}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>

                                                <div class="col-sm-6">
                                                    <!--                                <label class="col-form-label">State /Province /Region</label>-->
                                                    <select id="reg_state" name="reg_state" class="form-control">
                                                        <option value='1341'>Karnataka</option>
                                                        {% for each in region %}
                                                        <option value="{{ each.pk }}">{{ each.name }}</option>
                                                        {% endfor %}
                                                    </select>
                                                </div>

                                            </div>
                                        </div>

                                    </div>

                                    <!--  End Row College/University and Medical Council Registration No.-->


                                    <!-- ----------------Address -------------------- -->
                                    <!--            <div style="text-align:center">-->
                                    <!--                <h4><strong><u>Address</u></strong></h4>-->
                                    <!--            </div>-->
                                    <!--            <div class="hr-line-dashed"></div>-->




                                    <!--  End Row College/University and Medical Council Registration No.-->

                                    <!--            <div class="hr-line-dashed" ></div>-->
                                    <hr style="0.5px dashed black">
                                    <div style="text-align:left">
                                        <h4><strong><u>Introduced by:</u></strong></h4>
                                    </div>

                                    <div class="form-group row">

                                        <!-- <div class="col-sm-4">
                    <label class="col-form-label">Member Name:</label>

                    <input type="text" placeholder="Enter Member Name" class="form-control" id="memberName"
                        name="memberName" formControlName="memberName">
                </div>

                <div class="col-sm-4">
                    <label class="col-form-label">Signature:</label>
                    <input type="text" placeholder="Enter Signature" class="form-control" id="signature"
                        name="signature" formControlName="signature">
                </div>

                <div class="col-sm-4">
                    <label class="col-form-label">Life Membership No:</label>
                    <input type="text" placeholder="Enter Life Membership No" class="form-control" id="lifeMembershipNo"
                        name="lifeMembershipNo" formControlName="lifeMembershipNo">
                </div> -->
                                        <div class="table-responsive">
                                            <table class="table" id="dynamic_field1">
                                                <tr>
                                                    <th style="font-weight: normal;">Member Name:<span
                                                            style="color: red;">*</span></th>
                                                    <th style="font-weight: normal;">KOS Number</th>
                                                </tr>
                                                <tr>
                                                    <td> <select  id="memberID1"
                                                            style="width:auto;background-color: white;"
                                                            name="membership_introducedby"
                                                            class="form-control name_list">
                                                            <option value="" selected="" disabled="">Choose member
                                                            </option>
                                                            <!-- <option value="">:</option> -->
                                                            {% for each in member_list %}
                                                            <option value="{{ each.id }}">{{ each.user.first_name}}
                                                                {{ each.user.last_name}} </option>
                                                            {% endfor %}
                                                        </select>
                                                    </td>
                                                    <td><input readonly type="" id="select5">
                                                    </td>
                                                </tr>
                                                <tr>
                                                    <td> <select  id="memberID2"
                                                            style="width:auto;background-color: white;"
                                                            name="membership_introducedby2"
                                                            class="form-control name_list">
                                                            <option value="" selected="" disabled="">Choose member
                                                            </option>
                                                            {% for each in member_list %}
                                                            <option value="{{ each.id }}">{{ each.user.first_name}}
                                                                {{ each.user.last_name}}</option>
                                                            {% endfor %}
                                                        </select>
                                                    </td>
                                                    <td><input readonly type="" id="select6"> </td>
                                                </tr>
                                            </table>
                                        </div>
                                    </div>
                                    <hr style="0.5px dashed black;margin-top:-20px">
                                    <!--            <div class="hr-line-dashed"></div>-->
                                    <div class=" from-group row">
                                        <label class="col-sm-2 col-form-label">Photograph:<span
                                                style="color: red;">*</span></label>
                                        <div class="col-sm-3 fileinputs">
                                            <input type="file" class="file" id="addressLine2" required name="photo">
                                        </div>
                                    </div>



                                    <div class="fro-group row">


                                        <!--                    <label class="col-sm-1 col-form-label" ><span style="color: red;padding-left:150%;">*</span></label>-->
                                        <div class="col-sm-4">
                                            <input type="checkbox" name="checkbox" value="check" required id="agree" />
                                            <label class="col-sm-1 col-form-label"><span
                                                    style="color: red;padding-left:110%;">*</span></label>
                                            I agree to the privacy policy.

                                        </div>

                                    </div>

                                    <!--            <div class="form-group row">-->

                                    <!--                   <label class="col-sm-2 col-form-label"><span style="color: red;padding-left:110%;">*</span></label>-->
                                    <!--                    <div class="col-sm-4">-->
                                    <!--                        <select id="id_country" name="recidencecountry" class="form-control" >-->
                                    <!--                        <option value='105'>India</option>-->
                                    <!--                        {% for each in country %}-->
                                    <!--                        <option value="{{each.pk}}">{{each.name}}</option>-->
                                    <!--                        {% endfor %}-->
                                    <!--                    </select>-->




                                    <div class="fro-group row">

                                    </div>


                                    <div class="form-group row">

                                        <div class="col-sm-10 col-sm-offset-2 text-right">

                                            <button type="submit" class="btn btn-primary"><strong>Proceed to
                                                    payment</strong>

                                            </button>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

                                            <button type="button" class="btn btn-warning text-white"><strong><a
                                                        href="/home/">Cancel</a></strong>

                                            </button>
                                        </div>

                                    </div>

                                </form>


                            </div>

                        </div>
                </div>
            </div>
        </div>
    </div>
    {% endif %}


   


   

    <script>

        $(document).ready(function () {
            $("#filladdress").on("click", function () {
                if (this.checked) {
                    $("#officeaddress1").val($("#streetAddress").val());
                    $("#officeaddress2").val($("#streetaddress2").val());
                    console.log($("#streetAddress").val())
                    $(".officeAddress").hide();
                }

                else {

                    $(".officeAddress").show();


                }
            });
        });
    </script>


    <script>
        $('#dob').datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true
        });
        $('#date').datepicker({
            format: 'yyyy-mm-dd',
            autoclose: true
        });



        $(document).ready(function () {
            var i = 1;
            $('#add').click(function () {
                i++;
                $('#dynamic_field').append('<tr id="row' + i + '"><td><input type="text" name="degree[]" placeholder="Enter your Degree" class="form-control name_list" /></td><td><input type="text" name="year[]" placeholder="Enter your Year" class="form-control name_list" /></td><td><input type="text" name="college[]" placeholder="Enter your Collage" class="form-control name_list" /></td><td><button type="button" name="remove" id="' + i + '" class="btn btn-danger btn_remove">X</button></td></tr>');
            });
            $(document).on('click', '.btn_remove', function () {
                var button_id = $(this).attr("id");
                $('#row' + button_id + '').remove();
            });

        });

        $(document).ready(function () {
            var j = 1;
            $('#add1').click(function () {
                j++;
                $('#dynamic_field1').append('<tr id="row' + j + '"><td><input type="text" name="memberName[]" placeholder="Enter your Member Name" class="form-control name_list" /></td><td><input type="text" name="signature[]" placeholder="Enter your Signature" class="form-control name_list" /></td><td><input type="text" name="lifeMembershipNo[]" placeholder="Enter your LifeMembershipNo" class="form-control name_list" /></td><td><button type="button" name="remove" id="' + j + '" class="btn btn-danger btn_remove">X</button></td></tr>');
            });
            $(document).on('click', '.btn_remove', function () {
                var button_id = $(this).attr("id");
                $('#row' + button_id + '').remove();
            });

        });


    </script>

    <script type="text/javascript">


        function updateElementIndex(el, prefix, ndx) {
            var id_regex = new RegExp('(' + prefix + '-\\d+-)');
            var replacement = prefix + '-' + ndx + '-';
            if ($(el).attr("for")) $(el).attr("for", $(el).attr("for").replace(id_regex,
                replacement));
            if (el.id) el.id = el.id.replace(id_regex, replacement);
            if (el.name) el.name = el.name.replace(id_regex, replacement);
        }

        function addForm(btn, prefix) {
            var formCount = parseInt($('#id_' + prefix + '-TOTAL_FORMS').val());
            if (formCount < 1000) {
                // Clone a form (without event handlers) from the first form
                var row = $(".item:last").clone(false).get(0);

                // Insert it after the last form
                $(row).removeAttr('id').hide().insertAfter(".item:last").slideDown(300);

                // Remove the bits we don't want in the new row/form
                // e.g. error messages
                $(".errorlist", row).remove();
                $(row).children().removeClass("error");

                // Relabel or rename all the relevant bits
                $(row).find('.formset-field').each(function () {
                    updateElementIndex(this, prefix, formCount);
                    $(this).val('');
                    $(this).removeAttr('value');
                    $(this).prop('checked', false);
                });

                // Add an event handler for the delete item/form link
                $(row).find(".delete").click(function () {
                    return deleteForm(this, prefix);
                });
                // Update the total form count
                $("#id_" + prefix + "-TOTAL_FORMS").val(formCount + 1);

            } // End if

            return false;
        }


        function deleteForm(btn, prefix) {
            var formCount = parseInt($('#id_' + prefix + '-TOTAL_FORMS').val());
            if (formCount > 1) {
                // Delete the item/form
                var goto_id = $(btn).find('input').val();
                if (goto_id) {
                    $.ajax({
                        url: "/" + window.location.pathname.split("/")[1] + "/formset-data-delete/" + goto_id + "/?next=" + window.location.pathname,
                        error: function () {
                            console.log("error");
                        },
                        success: function (data) {
                            $(btn).parents('.item').remove();
                        },
                        type: 'GET'
                    });
                } else {
                    $(btn).parents('.item').remove();
                }

                var forms = $('.item'); // Get all the forms
                // Update the total number of forms (1 less than before)
                $('#id_' + prefix + '-TOTAL_FORMS').val(forms.length);
                var i = 0;
                // Go through the forms and set their indices, names and IDs
                for (formCount = forms.length; i < formCount; i++) {
                    $(forms.get(i)).find('.formset-field').each(function () {
                        updateElementIndex(this, prefix, i);
                    });
                }
            } // End if

            return false;
        }

        $("body").on('click', '.remove-form-row', function () {
            deleteForm($(this), String($('.add-form-row').attr('id')));
        });

        $("body").on('click', '.add-form-row', function () {
            return addForm($(this), String($(this).attr('id')));
        });


    </script>

    <script>
        $("#id_country").change(function () {
            var url = $("#registrationForm").attr("data-state-url");  // get the url of the `load_cities` view
            console.log(window.location.origin)
            var countryId = $(this).val();  // get the selected country ID from the HTML input
            console.log(countryId)

            $.ajax({                       // initialize an AJAX request
                url: window.location.origin + '/ajax/load-state/',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
                data: {
                    'country': countryId       // add the country id to the GET parameters
                },
                success: function (data) {   // `data` is the return of the `load_cities` view function
                    $("#recidence_cstate").html(data);  // replace the contents of the city input with the data that came from the server
                }
            });

        });


    </script>


    <script>
        $("#recidence_cstate").change(function () {
            var url = $("#registrationForm").attr("data-city-url");  // get the url of the `load_cities` view
            var regionId = $(this).val();  // get the selected country ID from the HTML input
            $.ajax({                       // initialize an AJAX request
                url: window.location.origin + '/ajax/load-city/',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
                data: {
                    'region': regionId       // add the country id to the GET parameters
                },
                success: function (data) {   // `data` is the return of the `load_cities` view function
                    $("#id_city").html(data);  // replace the contents of the city input with the data that came from the server
                }
            });

        });

    </script>

    <script>
        $("#id_country_office").change(function () {
            var url = $("#registrationForm").attr("data-state-url");  // get the url of the `load_cities` view
            console.log(window.location.origin)
            var countryId = $(this).val();  // get the selected country ID from the HTML input
            console.log(countryId)

            $.ajax({                       // initialize an AJAX request
                url: window.location.origin + '/ajax/load-state/',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
                data: {
                    'country': countryId       // add the country id to the GET parameters
                },
                success: function (data) {   // `data` is the return of the `load_cities` view function
                    $("#recidence_cstate_office").html(data);  // replace the contents of the city input with the data that came from the server
                }
            });

        });


    </script>
    <script>
        $("#recidence_cstate_office").change(function () {
            var url = $("#registrationForm").attr("data-city-url");  // get the url of the `load_cities` view
            var regionId = $(this).val();  // get the selected country ID from the HTML input
            $.ajax({                       // initialize an AJAX request
                url: window.location.origin + '/ajax/load-city/',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
                data: {
                    'region': regionId       // add the country id to the GET parameters
                },
                success: function (data) {   // `data` is the return of the `load_cities` view function
                    $("#id_city_office").html(data);  // replace the contents of the city input with the data that came from the server
                }
            });

        });

    </script>

    <script>
        $("#reg_country").change(function () {
            var url = $("#registrationForm").attr("data-state-url");  // get the url of the `load_cities` view
            console.log(window.location.origin)
            var countryId = $(this).val();  // get the selected country ID from the HTML input
            console.log(countryId)

            $.ajax({                       // initialize an AJAX request
                url: window.location.origin + '/ajax/load-state/',                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
                data: {
                    'country': countryId       // add the country id to the GET parameters
                },
                success: function (data) {   // `data` is the return of the `load_cities` view function
                    $("#reg_state").html(data);  // replace the contents of the city input with the data that came from the server
                }
            });

        });


    </script>


</head>

</html>
{% endblock %}